{% include 'header_home_usuario.html' %}
    {% load static %}
    {% block content %}
    {% csrf_token %}
    <main class=" ml-6 pl-4 mr-6 pr-4">
        <h1 class="is-size-2 ">Bienvenido, {{ user.nombre_completo }} </h1>
        <div style="background-color: #FFB36D; border-radius: 15px" class="mt-4">
            <form action="{% url 'editar_perfil' %}" enctype="multipart/form-data" method="post" class="columns p-3 mb-6">
                {% csrf_token %}
                <div class="column is-one-quarter is-flex is-justify-content-center has-text-centered p-0 m-0 "
                     style="flex-direction: column">
                    {% if user.img %}
                        <label for="file-input" class="is-flex is-justify-content-center">
                            <img  src="{{ user.img.url }}" alt="" style="border-radius: 50%; width: 80%"
                                 class="is-flex is-justify-content image ">
                        </label>
                        <input id="file-input" name="foto_perfil" type="file" accept="image/png, image/gif, image/jpeg"
                               style="display: none"/>
                        <p class="has-text-grey is-size-6 p-2">Pincha en la imagen para <br> cambiar la foto de
                            perfil
                        </p>
                    {% else %}
                        <label for="file-input" class="is-flex is-justify-content-center">
                            <img src="{% static 'img/perfilenblanco.webp' %}"
                                 style="border-radius: 50%; width: 50%">
                        </label>
                        <input id="file-input" name="foto_perfil" type="file" accept="image/png, image/gif, image/jpeg"
                               style="display: none"/>
                        <p class="has-text-grey is-size-6 p-2">Pincha en la imagen para <br> cambiar la foto de
                            perfil
                        </p>
                    {% endif %}
                    <label class="mt-4">Fecha de nacimiento:</label>
                    {% if user.fecha_nacimiento %}
                        <section class="is-flex is-justify-content-center mt-2">
                            <input type="text" name="user_fecha_nacimiento" value="{{ user.fecha_nacimiento|date:"Y-m-d" }}" class="input is-rounded"
                                   style="width: 75%; background-color: #D9D9D9;">
                        </section>
                    {% else %}
                        <section class="is-flex is-justify-content-center mt-2">
                            <input type="text" name="user_fecha_nacimiento" placeholder="Tu fecha de nacimiento" class="input is-rounded "
                                   style="width: 75%; background-color: #D9D9D9;">
                        </section>
                    {% endif %}
                    <label class=" mt-4 ">Sexo:</label>
                    <section class="is-flex is-justify-content-center mt-2">
                        <input type="text" name="user_sexo" value="{{ user.sexo }}" class="input is-rounded"
                               style="width: 75%; background-color: #D9D9D9;">
                    </section>
                </div>
                <div class="column px-0 p-2 ">
                    <h2 class="is-size-3">Configura tu perfil</h2>
                    <section class="columns is-flex center is-multiline">
                        <div class="column mt-3 is-flex is-flex-direction-column center is-full-mobile">
                            <label >Nombre de Usuario:</label>
                            <input type="text" name="user_username" value="{{ user.username }}" class="input is-rounded mt-2 "
                                   style="background-color: #D9D9D9; width: 50%">
                            <label class="mt-3" >Nombre Completo:</label>
                            <input type="text" name="user_nombre_completo" value="{{ user.nombre_completo }}" class="input is-rounded mt-2"
                                   style="background-color: #D9D9D9; width: 50%">
                        </div>
                        <div class="column mt-3 is-flex is-flex-direction-column is-full-mobile">
                            <label for="">Correo electrónico:</label>
                            <input type="text" value="{{ user.email }}" class="input is-rounded mt-2"
                                   style="background-color: #D9D9D9; width: 50%" disabled>
                            <label class="mt-3">Contraseña:</label>
                            <input type="password" value="xxxxxxxx" class="input is-rounded mt-2 int"
                                   style="background-color: #D9D9D9; width: 50%" disabled>
                            <div>
                                <button type="button"
                                        class="js-modal-trigger button is-info is-rounded mt-1"
                                        data-target="modal-js-example" >
                                    Cambiar&nbsp;contraseña
                                </button>
                            </div>
                        </div>
                    </section>
                    <section class="is-flex is-justify-content-center">
                        <button type="submit" class="button"> Guardar cambios </button>
                    </section>
                    <section class="is-flex is-flex-direction-column">
                        <div class="is-flex">
                            <h3>Plataformas:</h3>
                            <a href="{% url 'plataformas' %}" style="background-color: transparent; border: none"><i
                                    class="fa-solid fa-circle-plus"></i></a>
                        </div>

                        <div class="columns is-multiline is-mobile my-2">
                            {% for p in plataformas %}
                                <div class="column is-2-desktop is-3-tablet is-6-mobile center-image">
                                    <figure class="is-128x128">
                                        <img src="{{ p.img.url }}" alt="{{ p.nombre }}">
                                    </figure>
                                </div>
                            {% empty %}
                                <p class="ml-3">No dispones de plataformas vinculadas.</p>
                            {% endfor %}
                        </div>
                    </section>
                </div>
            </form>
            <div id="modal-js-example" class="modal">
                <div class="modal-background"></div>
                <div class="modal-content">
                    <div class="box">
                        <!-- Formulario para solicitar el envío del código de verificación -->
                        <form action="{% url 'send_verification_code' %}" method="post">
                            {% csrf_token %}
                            <button type="submit">Enviar código de verificación</button>
                        </form>

                        <!-- Formulario para introducir el código de verificación -->
                        <form action="{% url 'verify_code' %}" method="post">
                            {% csrf_token %}
                            <input type="text" name="code" placeholder="Introduce el código de verificación">
                            <button type="submit">Verificar código</button>
                        </form>
                    </div>
                </div>
                <button class="modal-close is-large" aria-label="close"></button>
            </div>
        </div>
    </main>
        <br>
    {% endblock %}
    {% include "footer.html" %}
    <script src="{% static 'js/modals.js' %}"></script>
    <script src="{% static 'js/navbar.js' %}"></script>
</body>
</html>