{% include 'header_home_usuario.html' %}

    
    {% load static %}
    {% block content %}
    {% csrf_token %}
    <!-- Main content -->
    <!-- Gallery | Cards @a7v8x-->
    <main class="column mb-6 mt-5">
       <div class="columns is-centered">
            <div class="slider" x-data="{start: true, end: false}">
              <div class="slider__content" x-ref="slider" x-on:scroll.debounce="$refs.slider.scrollLeft == 0 ? start = true : start = false; Math.abs(($refs.slider.scrollWidth - $refs.slider.offsetWidth) - $refs.slider.scrollLeft) < 5 ? end = true : end = false;">
                  <!-- Slider items: 10 min <> 15-20 max -->
                  {% for psh in header %}
                        <div class="slider__item">
                            <img class="slider__image" src="{{ psh.img }}" alt="Imagen de la pelicula {{ psh.nombre }}">
                            <div class="slider__info">
                                <h2>{{ psh.nombre }}</h2>
                            </div>
                        </div>
                {% endfor %}
              </div>
              <div class="slider__nav has-text-black is-bold">
                <button class="slider__nav__button" x-on:click="$refs.slider.scrollBy({left: $refs.slider.offsetWidth * -1, behavior: 'smooth'});" x-bind:class="start ? '' : 'slider__nav__button--active'">Previo</button>
                <button class="slider__nav__button" x-on:click="$refs.slider.scrollBy({left: $refs.slider.offsetWidth, behavior: 'smooth'});" x-bind:class="end ? '' : 'slider__nav__button--active'">Siguiente</button>
              </div>
            </div>
       </div>
       <!-- Este apartado se puede reutilizar en la pagina principal (usuarios no registrados) -->
       <!-- Hasta que no se tengan las tablas con los datos no se puede hacer los filtros de las pelÃ­culas-->
       <div class="is-centered mr-5 ml-5">
       <p class="is-bold is-uppercase pb-3" style="font-weight: 900">Continuar viendo: </p>
            <div class="columns is-multiline is-mobile">
                {% for s in series %}
                    <div class="column is-one-quarter-widescreen is-one-quarter-desktop is-one-quarter-tablet is-half-mobile">
                        <div class="card">
                            <a href="{% url 'serie' s.id %}">
                                <div class="card-image">
                                    <figure class="image is-2by3">
                                        <img src="{{ s.img }}" alt="Imagen de la pelicula {{ s.nombre }}">
                                    </figure>
                                </div>
                            </a>
                        </div>
                    </div>
                {% endfor %}
                {% for p in peliculas %}
                    <div class="column is-one-quarter-widescreen is-one-quarter-desktop is-one-quarter-tablet is-half-mobile">
                        <a href="{% url 'pelicula' p.id %}">
                            <div class="card">
                                <div class="card-image">
                                    <figure class="image is-2by3">
                                        <img src="{{ p.img }}" alt="Imagen de la pelicula {{ p.nombre }}">
                                    </figure>
                                </div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>  
        </div>
    </main>

    {% endblock %}
    {% include "footer.html" %}
    <script src="{% static 'js/navbar.js' %} "></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.10.2/cdn.js'></script>
</body>
</html>